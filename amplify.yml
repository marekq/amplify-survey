version: 0.1
backend:
  phases:
    build:
      commands:

        # push the stack to amplify
        - amplifyPush --simple

frontend:
  phases:
    build:
      commands:
        # install dependancies 
        - yum install -y sudo gcc-c++ make
        - curl -sL https://rpm.nodesource.com/setup_14.x | sudo -E bash - 
        - yum install -y nodejs
        - node -v
        
        # install and build with yarn
        - yarn install
        - yarn run build

  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
      
  cache:
    paths:
      - node_modules/**/*
